group:
  deadbolts:
    name: All Deadbolts
    entities:
      - lock.touchscreen_deadbolt_z_wave_plus
      - lock.touchscreen_deadbolt_z_wave_plus_2
      - lock.touchscreen_deadbolt_z_wave_plus_3

input_text:
  guest_code:
    name: Guest Code
    mode: password
    pattern: "[0-9]{4}"
  front_door_last_user:
    name: Front Door Last User
  back_door_last_user:
    name: Back Door Last User
  garager_door_last_user:
    name: Garage Door Last User

automation:
  - id: "1617499867707"
    alias: Lock doors when alarm is armed
    trigger:
      - platform: state
        entity_id: alarm_control_panel.alarm
        from: "disarmed"
        to: "armed_home"
      - platform: state
        entity_id: alarm_control_panel.alarm
        from: "arming"
        to: "armed_away"
    condition: []
    action:
      - alias: "Lock front door if closed"
        choose:
        - conditions:
            - alias: "Front door closed"
              condition: state
              entity_id: 
                - binary_sensor.samjin_multi_fcd00d01_ias_zone
              state: "off"
          sequence:
            - alias: "Lock front door"
              service: lock.lock
              target:
                entity_id: lock.touchscreen_deadbolt_z_wave_plus
        default:
            - alias: "Notify front door not closed"
              service: homeassistant.turn_on
              data:
                recipient: all
                title: Pandemicabin Alert
                message: Front door is open. Could not lock door.
      - alias: "Lock back door if closed"
        choose:
        - conditions:
            - alias: "Back door closed"
              condition: state
              entity_id: 
                - binary_sensor.samjin_multi_fcd00d01_ias_zone
              state: "off"
          sequence:
            - alias: "Lock back door"
              service: lock.lock
              target:
                entity_id: lock.touchscreen_deadbolt_z_wave_plus
        default:
            - alias: "Notify back door not closed"
              service: homeassistant.turn_on
              data:
                recipient: all
                title: Pandemicabin Alert
                message: Back door is open. Could not lock door.